# 2、概率

心电图常常用于检查患者是否患上心脏病。当心电图出现不正常的模式时，可以判定患者有心脏病。但心电图检查时假阳性(患者正常但根据心电图判定为不正常)的概率为0.1，而假阴性(患者不正常但根据心电图判定为正常)的概率也为0.1。而假定某人患心脏病的先验概率为0.001。假定他声称他有心痛的问题。虽然有假阳性和假阴性的问题干扰我们，但仍然可以了解到依据心电图的结果判定该患者有心脏病的概率仍然会小于0.01。基中包含贝叶斯的概率理论，详情可见[Why Clinicians are Natural Bayesians](https://www.bmj.com/content/330/7499/1080.full)。

这里的关键是如何恰当地组合各种概率。另外同样的这种分析还可以用于其它工程产品或实体结构的检测。利用这类概率分析可以评估科学和工程领域中的风险并为此做出更好的决策。在本章中要介绍概率的基本概念，并将它们用于各种各样问题的风险评估。

## 2.1、样本空间和事件

### 2.1.1、随机实验

我们测量铜线中的电流，我们就是在进行一次实验。但是日复一日的测量结果会稍稍有一些不同，因为在我们的实验中还有许多未经控制的变量在影响测量结果，这些变量可能是环境温度、仪器的微小变化、铜线中的微量杂质以及所处的位置，当然还可能有电源飘移。总而言之，这一实验(正如我们进行的许许多多的其它实验一样)，结果中都包含了**随机**成分。在某些情况下，这种随机成分相对于实验的目标很小，我们可以忽略它们。比如，在搅拌站的称量系统中，一定会存在某种变动，但对最终的混凝土强度结果的影响足够小，仍然能保证我们得到设计要求的混凝土强度，因此我们往往会忽略这些变动，因此会为这些称量的变动设定上下限值。

但是，无论我们在实验中有多么仔细小心，变动总是存在的，并且它的数量足够大以到于会干扰我们由实验数据所做的决策。在这种情况下，本教材为建模和分析实验结果了价值非常高的方法。本教材的目标是要理解、量化和建模常常遇到的变动类型。在分析和思考问题时考虑到这些变动，我们能做出恰当的判断。

<figure>
  <img src="/images/fig2.1.png" opacity=0.6/>
  <figcaption>图2.1在模型和物理系统之间的持续改进</figcaption>
</figure>

包含了变动的模型和分析与其它科学和工程领域中的模型并没有本质的不同。图2.1显示了它们的关键内容。建模就是开发物理系统的数学模型(或抽象)。这种抽象并不需要十分完美。我们可以持续不断在依据测量结果完善模型。比如牛顿力学并不能完美地解释我们所处的物理世界，但它仍然是非常有用的模型，可以用来研究和分析大多数工程产品，可以近似地量化它们性能。假定数学抽象与我们所研究的系统测量相互吻合，则可以利用这个模型去理解、描述并量化系统并预测系统针对输入的响应。从这个观点来看，我们对世界的认识就是一种近似，从这种近似中能抽象出事物的共性，并利用这一共性去研究、解释、描述和量化世界。这是一种科学思维。牛顿力学对于相对论是一种近似，而开普勒的三大行星运行定律更是牛顿力学的一种特例。我们并不能否定三种力学抽象，只是在特定研究对象，有选择地使用它们，以图达到尽可能简化地描述事物。

<figure>
  <img src="/images/fig2.2.png" opacity=0.6/>
  <figcaption>图2.2噪声变量影响系统输出</figcaption>
</figure>

在本教材中所讨论的模型和分析都是允许系统输出有变动存在的，虽然我们并没有在研究过程中有意识地修改受控制变量。图2.2显示了这一概念，即它考虑到了不可控制的输入(噪声)与可控制输入会共同影响系统的输出。因为不可控制的输入总是存在的，相同的可控制输入配置并不能每次都产生完全相同的测量结果。

!!!note "随机实验"
    即使每一次都以相同的方式重复实验，但其结果都会不同，这种实验称为**随机实验**。

最简单最常见的随机实验就是抛硬币的实验。即使我们使用机器来抛，每一次的结果都会不一样。仍然以测量电流强度为例，系统模型可以是简单的$\Omega$定律。因为有不可控制的输入，所以可以想象得到的是实测的电流强度一定会相对$\Omega$定律有一定的变动存在，而$\Omega$定律就是这些测量结果的恰当近似。

如果模型的结果总是与测量结果偏差过大，以致无法应用模型去研究、分析、解释、描述和量化所研究的问题，则有可能有未加控制的输入对系统的影响过大，需要修改模型包含这些未加控制的输入变量，在实验中要对这些变量加以控制。相反地，如果常常使用的模型在同一问题上总是出现偏差，我们应该考虑可能有可控制的因素我们未加以严格控制。这是一个问题的两个方面。前者是模型需要扩充，后者是生产过程需要加强控制。

比如，混凝土强度与水胶比、水泥强度之间的关系是包洛米公式。一般来说，包洛米公式是对混凝土强度的恰当近似，在长期生产实践中，该公式都十分有效，能满足混凝土工程的要求。目前，在严格控制的前提下，还没有发现包洛米公式失效的真正实例。某一搅拌站也长期利用这一模型去控制生产。但在最近一段时间，该搅拌站发现混凝土强度总是过于偏低。这时，首先要考虑的是我们的生产控制可能出现了问题。在整个生产过程中，但凡会改变水胶比的因素都是我们应该去检查的。比如，砂、石料含水率测量不准、称量系统称量不准，减水剂品质劣化导致需要多加水等等不一而足。得一个一个排查。这是生产的控制问题。另外一个方面就是要考虑模型本身的问题：比如相对论的诞生就是在于过去的运动定律无法解释诸如迈克尔逊－莫雷试验，这是新的问题出现了。过去的运动模型无法解决高速运动的现象，经过多人长期思考，最终爱因斯坦提出了新的时空观，改变和扩充了运动模型，成功解释了许多新的现象。相对论在当今日常生活的应用就是卫星导航的计算，需要用相对论处理无线电波运动时间，否则会导致位置测量大的变动，其精度不能满足生产生活中所需要的导航要求。但在日常生活的其它方面，并不完全需要相对论模型，经典运动模型就足够了。

所以，随机实验的核心在于，我们要严格控制已知的或需要控制的因素，在这个基础上，我们承认有不可控制的因素，也有模型有意识忽略而不控制的因素，这些因素都会影响系统对输入的响应。因此，真实的测量结果总会有变动。在随机实验这一概念的基础上，我们承认这种变动。并开发一套技术来解释、量化这种变动，保证我们在工程中做出恰当的判断。

### 2.1.2、样本空间

为了建模和分析随机实验，必须理解系统随机实验可能的**输出**集合。这些集合组成了随机实验结果的样本空间：

!!!note "样本空间"
    随机实验的所有可能的输出集合称为实验的**样本空间**。样本空间用符号$\mathit{S}$表示。

抛硬币这样的随机实验，其样本空间非常简单，即$\mathit{S}= \{＋1，－1\}$(+1表示正面，-1表示反面)。混凝土强度的样本空间为正实数区间，即$\mathit{S}\in [0, +\infty]$。这两个实例的样本空间取值有所不同，前者是取离散值，即在实数空间中的聚值并不连续；后一个实例则完全不同，混凝土强度可以是正实数空间的任意一个值，样本空间取连续实数值。

!!!note "离散和连续样本空间"
    如果样本空间只包含有限的或可数无限的输出值，则该样本空间是**离散样本空间**。如果样本空间包含一个实数区间(无论该区间是有限区间还是无限区间)，则样本空间是**连续样本空间**。

在这个定义中，我们用到了集合的可数无限大的概念；在接下来的讨论中还会应用到集体的联合、交或补集集操作以及子集的概念。不了解集合论的基础知识的读者可以研究学习集合论的相关基础理论知识。

### 2.1.3、事件

我们常常对随机实验结果的某此部分有兴趣，这些部分就是样本空间的子集，还可以对这些子集应用集合操作。

!!!note "事件"
  
    **事件**是随机实验样本空间的子集。我们用$\mathit{E}$表示事件。

可以从已存在的事件描述新的事件，这需要利用集合的操作，比如联合、交和补。下面是它们的一些基本应用。

- 两个事件的**联合**事件由包含在这两个事件中的所有输出结果组成。我们用$\mathit{E}_1\cup\mathit{E}_2$表示两个事件的联合事件。
- 两个事件的**交**事件由同时包含在这两个事件中的输出结果组成。我们用$\mathit{E}_1\cap\mathit{E}_2$表示两个事件的交事件。
- 两个事件的**互补**事件由样本空间中的且不在这两个事件中的输出结果组成。我们用$\mathit{E}'$或$\mathit{E}^C$表示两个事件的补事件。

!!!note "实例2.1"
    假定有样本空间$\mathit{S}=\{yy,yn,ny,nn\}$。
    
    我们可以得到事件$\mathit{E}_1=\{yy,yn,ny\}$、$\mathit{E}_2=\{nn\}$。
    
    还可以得到$\mathit{E}_3=\varnothing$和$\mathit{E}_4=\mathit{S}$。
    
    利用集合操作我们还能得到$\mathit{E}_1\cup\mathit{E}_5=\mathit{S}$、$\mathit{E}_1\cap\mathit{E}_5=\{yn,ny\}$和$\mathit{E}'_1=\{nn\}$。

需要解释的是：事件常常定义的是我们感兴趣、需要研究的随机实验输出结果。人们常常对特定事件感兴趣。比如在混凝土的强度等级定义中，我们感兴趣的是大于强度等级规定值的所有输出结果。我们希望这个事件发生的概率要达到0.95。这个事件的发生，表明我们生产的混凝土强度等级在到设计要求。

<figure>
  <img src="/images/fig2.3.png" opacity=0.6/>
  <figcaption>图2.3样本空间、事件及其关系之间的关系</figcaption>
</figure>

可以用图形表示集合之间的关系，这些图当然也能表示事件之间的关系。我们使用**Venn图**表达样本空间和样本空间中的事件。如上图2.3(a)，用矩形内的点表示随机实验的样本空间$\mathit{S}$，事件$\mathit{A}$和$mathit{B}$表示该样本空间中的两个事件。图2.3(b)到图2.3(d)表示了事件之间的关系。下面的图2.4表示两个事件之间没有共同结果。

<figure>
  <img src="/images/fig2.4.png" opacity=0.6/>
  <figcaption>图2.4没有共同事件的事件</figcaption>
</figure>

我们称这种没有共同事件的事件为互斥事件。

!!!note "互斥事件"

    两个事件$\mathit{E}_1$和$\mathit{E}_2$，如果：

    $$
    \mathit{E}_1\cap\mathit{E}_2＝\varnothing
    $$
  则称这两个事件为**互斥事件**。

根据互补事件的定义，可以得到

$$(\mathit{E'})'=\mathit{E}$$

根据集合操作的分配律，可以得到：

$$
(\mathit{A}\cup\mathit{B})\cap\mathit{C}=(\mathit{A}\cap\mathit{C})\cup(\mathit{B}\cap\mathit{C})\
$$

和

$$
(\mathit{A}\cap\mathit{B})\cup\mathit{C}=(\mathit{A}\cup\mathit{C})\cap(\mathit{B}\cup\mathit{C})
$$

根据DeMorgan定律，可以得到：

$$
(\mathit{A}\cup\mathit{B})'=\mathit{A}'\cap\mathit{B}'
$$

和

$$
(\mathit{A}\cap\mathit{B})'=\mathit{A}'\cup\mathit{B}'
$$

还应该记住以下交换规律：

$$
\mathit{A}\cap\mathit{B}=\mathit{B}\cap\mathit{A}
$$

和

$$
\mathit{A}\cup\mathit{B}=\mathit{B}\cup\mathit{A}
$$

