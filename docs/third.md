# 3、离散随机变量及其概率分布

在[第2章](second.md)我们介绍了概率的基础知识，最后一节(2.8)特别介绍了随机变量。随机变量是一个函数，它为随机实验的样本空间分配一个具体的数字。

在医院急诊科，前来急诊的病人有时会多，有时会少，是随机变动的。因此我们可以用随机变量来表示某一个时刻急诊科就诊总人数。通过观察，可以分析就诊病人在每一天的分布情况，由此可以分析急诊科的资源配置是否满足要求，在现有配置下不满足要求的风险有多大。这是本章主要的研究内容。

!!!note "学习目标"

    经过仔细学习本章后，可以做到：
    
    1. 从概率质量函数确定概率，或相反从概率确定概率质量函数
    2. 从累积分布函数确定概率，从概率质量函数确定累积概率分布函数，或相反。
    3. 计算离散随机变量的平均值和方差。
    4. 理解某些常用离散概率分布的假设。
    5. 选择适当的离散概率分布，计算特定应用的概率。
    6. 为某些常用的离散概率分布计算概率、确定平均值和方差

## 3.1、离散随机变量

许多系统，比如[第2章]的蒸馏实例，再比半导体生产，甚至于水泥生产、混凝土生产及浇筑等等系统，都可以用相同或相似的随机实验来模拟建模，它们都有相同的抽象模型。人们可以分析这些常见模型的随机变量分布，它们的结果又能用于其它领域的工程实例中。这是人类认识世界的模式，即举一返三的模式。在本章我们要分析少量几个常用常见的随机实验和**离散随机**变量。由于在随机实验这个抽象模型的基础上讨论，所以我们常常可以忽略具体系统底层的样本空间而直接描述特定随机变量的分布。

!!!note "实例3.1"
    商业用语音通讯系统常常包含48条外线。在某一特定时刻，观察系统会发现某些线路正在被使用。设随机变量$X$表示正在使用的线路数量。那么$X$可以是$\{0,1,\cdots,48\}$之间的任何整数。当观察到系统正有10条线路在使用时，则$x=10$。

!!!note "实例3.2"
    混凝土生产强度等级C30的普通混凝土。针对连续生产的180方混凝土，我们取两次样检测其强度。检测结果有*合格*(pass)和*不合格*(fail)两个结果。假定混凝土强度合格的概率为0.95，并且两次抽样是随机独立的。如表3.1显示了随机实验的样本空间和相关的概率。比如，因为独立性，则第一组试件合格第二级试件不合格的概率的随机变量$X$取值为$pf$，它的概率为:

    $$
    P(pf)=0.95(0.05)=0.0475
    $$

    在这个实例中，随机变量$X$被定义为合格试件组数。

!!!note "表3.1、混凝土检测"

    |试件组1|试件组2|概率|$x$|
    |--|--|--|--|
    |pass|pass|0.9025|2|
    |fail|pass|0.0475|1|
    |pass|fail|0.0475|1|
    |fail|fail|0.0025|0|

由实例3.2可知，针对连续生产的混凝土抽取两组试件，只要生产稳定可控，两组试件都不合格的概率是微乎其微的，即使有一组不合格的概率也只有9.5％，应该很少发生。如果生产过程中发生了，表明这是一个强烈的信号，告诉我们生产过程中可能有应该控制的因素未控制好，需要去查找原因解决问题。

## 3.2、概率分布和概率质量函数

随机变量是对随机实验结果的映射函数，可以用来描述非常多系统的随机过程。要用好它，则凸现了其性质的重要性。因此我们在讨论时往往会更关注它的概率分布而忽略它的底层原因。比如在3.1节中的两个实例中，我们常常关注随机变量的在$\{0,1,\cdots,48\}$中的取值。同样地，在实例3.2中，我们也常常关心随机变量在$\{0,1,2\}$上的取值。

随机变量$X$的**概率分布**描述该变量某一特定值的概率。对于本章研究的离散随机变量，分布常常由一个列表组成。该列表列出了每一个随机变量取值所对应的概率。在某些情况下，用一个公式表达这些概率也是很方便的。

!!!note "实例3.3"
    在通过数字转换的过程中有可能会接收到错误的数字位。设$X$等于接下来四个数字位接收到错误位数，可能的值就是$\{0,1,2,3,4\}$。下面的数据给出了依据模型所得到概率。假定如下：

    $$
    \begin{align}
    P(X=0)&=0.6561 &\qquad P(X=1)=0.2916 \nonumber\\
    P(X=2)&=0.0486 &\qquad P(X=3)=0.0036 \nonumber\\
    P(X=4)&=0.0001 \nonumber
    \end{align}
    $$

    $X$的概率分布就是它的每一个取值与对应的概率之间的关系。我们可以用图形来表达这种关系。事实上概率分布就是一种函数，即由随机变量取值与它随机实验时获得该值的概率。图3.1表达了这种关系。

!!!note "图3.1、错误转换数字数的概率分布"
    ![fig.3.1](images/fig3.1.png)

!!!note "概率质量函数"
    离散变量$X$它的可能取值为$\{x_1,x_2,\cdots,x_n\}$的**概率质量函数**(probability mass function)就是函数：
    
    $$
    \begin{align}
    &\text{(1)}\space f(x_i)\geq 0 \nonumber \\
    &\text{(2)}\space \sum_{i=1}^{n}f(x_i)=1 \nonumber \\
    &\text{(3)}\space f(x_i)=P(X=x_i) \qquad \qquad
    \end{align}
    $$

根据概率质量函数的定义，实例3的各个函数值为$f(0)=0.6561$、$f(1)=0.2916$、$f(2)=0.0486$、$f(3)=0.0036$以及$f(4)=0.0001$。全部相加的各为1。

## 3.3、累积分布函数

!!!note "实例3.4"
    在实例3.3中，我们可能会更关心随机变量取前三个错误位或更少的概率。因此问题可以描述为$P(X\leq 3)$。
    事件$X\leq 3$是三个事件$\{X=0\}$、$\{X=1\}$联合事件、$\{X=2\}$和$\{X=3\}$的联合事件。因为这几个事件都是互斥事件，所以有:

    $$
    \begin{align}
    P(X\leq 3) &= P(X=0)+P(X=1)+P(X=2)+P(X=3)\nonumber \\
    &=0.6561+0.2916+0.00486+0.0036=0.9999 \nonumber
    \end{align}    
    $$

    利用这个方法，还可以确定概率分布。即：
    $$
    P(X=3)=P(X\leq 3)-P(X\leq 2)=0.0036

从实例3.4我们知道，提供诸如$P(X\leq 3)$这样的**累积概率**用于分析和研究是非常有帮助的，使用累积概率还能方便地确定概率质量函数。因此 ，累积概率代替概率质量函数用于描述随机变量也是非常好的方法。

一般地，对于任意可能取值为$\{x_1,x_2,\cdots,x_n\}$的离散随机变量，事件$\{X=1\},\{X=2\},\cdots,\{X=n\}$是互斥事件，因此有$P(X\leq x)=\sum_{x_i\leq x}f(x_i)$。

!!!note "累积分布函数"

    用$F(x)表示离散随机变量$X$的**累积分布函数**(cumulative distribution function)，它应该是：

    $$
    F(x)=P(X\leq x)=\sum\nolimits_{xi\leq x}f(x_i)
    $$

    离散随机变量$X$的累积概率函数$F(x)$应该满足以下条件：

    $$
    \begin{align}
    &\text{(1)}\space F(x)=P(X\leq x)=\sum\nolimits _{x_i\leq x}f(x_i) \nonumber\\
    &\text{(2)}\space  0\leq F(x)\leq 1 \nonumber\\
    &\text{(3)}\space \text{If}\space x\leq y,\space \text{then}\space F(x)\leq F(y)\qquad\qquad
    \end{align}
    $$

累积分布函数的性质(1)和(2)是由它的定义所决定的。而性质(3)则是因为事件的包含性决定的。因为如果$x\leq y$，则事件$\{X\leq x\}$包含在事件$\{X\leq y\}$中。你概率质量函数一样，累积概率函数也提供概率。即使只假定随机变量$X$只取整数值，累积分布函数也可以被定义为非整数值。在实例3.4中，可以有$F(1.5)=P{X\leq 1.5}=P(X=0)+P(X=1)=0.9477$。下面我们用实例解释如何用累积分布函数计算概率质量函数。

!!!note "实例3.5"

    从下面给出的随机变量$X$的累积分布函数计算它的概率质量函数：

    $$
    F(x)=
    \begin{cases}
        &0      &\qquad x< -2 \\
        &0.2    &\qquad x-2\leq x <0 \\
        &0.7    &\qquad 0\leq x <2 \\
        &1      &\qquad 2\leq x       
    \end{cases}
    $$

    图3.2显示了$X$的累积分布函数。从图中我们看到，只有点$\{-2,0,2\}$才接受非零概率。每一个点的概率质量函数它的累积分布函数在该点的变化量。因此我们有：

    $$
    \begin{align}
    f(-2) &=0.2-0=0.2\nonumber\\
    f(0)  &=0.7-0.2=0.5\nonumber\\
    f(2)  &=1.0-0.7=0.3\nonumber
    \end{align}
    $$

!!!note "图3.2、实例3.5的累积分布函数"
    ![fig3.2](images/fig3.2.png)

## 3.4、离散随机变量的平均值和方差


有两个非常重要的数，它们可以描述随机变量概率分布的中心位置和分散程度(或变动程度)。它们就是平均值和方差。这两个数并不能唯一地描述概率分布。也即是说两个不同的分布有可能会有相同的平均值和方差。这有点类似于混凝土用砂的细度模数。细度模数可以描述砂子的粗细程度，但并不能唯一确定其级配。因为不同的筛分结果有可能会得到相同的细度模数。像这类数据，比如随机变量的平均值和方差，像混凝土用砂的细度模数，都是对事物某一性质的概要描述，并是能决定它们的性质，但却给我们非常强制信息，是非常重要的一类数据。

!!!note "平均值和方差"
    离散随机变量$X$的**平均值**(mean)或**期望值**(expected value)用$\mu$表示，它由下述公式(3)确定。

    $$
    \begin{equation}
    \mu=E(X)=\sum_{x}xf(x) \qquad\qquad
    \end{equation}
    $$

    $X$的**方差**(variance)用$\sigma^2$表示，它等于:

    $$
    \sigma^2=V(X)=E(X-\mu)^2=\sum_x(x-\mu)^2f(x)=\sum_xx^2f(x)-\mu^2
    $$

    $X$的**标准差**(standard deviation)为$\sigma=\sqrt{\sigma}^2$。

$X$的平均值实质上是它取值的加权平均值(weighted average)，其权就是每一个可能值的概率。如果概率质量函数$f(x)$是细长梁上的荷载，那么$E(x)$就是梁的平衡点。同样地，$E(X)$用类似于平衡点的方式描述的是$X$分布的“中心点”。图3.3描述了这种类似性。

随机变量$X$的方差则是它的可能值的分散程度的量度。方差针对$(x-\mu)^2$做加权平均，其权就是$f(x)$。

图3.3例示了平均值相同但方差不同的概率分布。

!!!note "图3.3、概率分布可以视为细长梁上的荷载，其平均值就是平衡点。"
    ![fig3.3](images/fig3.3.png)

即使平均值和方差完全相同，随机变量的概率也可能不相同。图3.4例示了这一点。

!!!note "图3.4、有相同平均值和方差的不同分布"
    ![fig3.4](images/fig3.4.png)

再看看方差的定义，它实质上是随机变量$X$的某一个函数的期望值，在这里这个函数就是$h(X)=(X-\mu)^2$。一般地，任何随机变量$X$的函数$h(X)$的期望值可以用类似的方式来定义：

!!!note "离散随机变量函数的期望值"
    如果$X$是离散随机变量，其概率质量函数是$f(x)$，则它的函数的期望值为：

    $$
    \begin{equation}
    E[h(X)]=\sum_{x}h(x)f(x)\qquad\qquad
    \end{equation}
    $$

## 3.5、几个重要的离散随机变量分布