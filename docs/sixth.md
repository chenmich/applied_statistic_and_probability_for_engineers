# 6、描述统计

统计就是关于数据的科学。处理数据的一个重要方面是要组织数据，也要直观地显示数据的特性，比如我们计算数据的平均值和方差，都是对数据的一种直观介绍。我们也会用图形的方法显示数据的特征。通过这些方法我们解释和处理数据，为后续的分析提供帮助。有关统计的这一方面的技术和内容我们称为**描述统计**。比如，我们在第一章的表1.1给出的一组混凝土立方抗压强度的数据43.8、43.2、45.0、48.4、45.8、41.2、46，1和45.3(MPa)。只是观察这一组数据我们就看到了数据的变动。那么，我们应该如何简单明了地显示这些数据的特征呢？当然，我们可以用平均值和方差。平均值代表了数据的中心位置，是以概率为权的加权平均值，而方差则代表了数据的集中程度。这种用数字显示一组数据的特征是一种很好的方法。但是我们还可以用强大的图形功能来显示这一组数据的特征。本章的重点就是介绍描述数据的方法。利用这些方法我们能更深刻地理解数据的特征。

!!!note "学习目标"
    
    仔细学习本章后，可以做到：

    1. 计算和解释样本的平均值、方差、标准差、中值和范围
    2. 解释样本平均值、方差、总体平均值和总体方差
    3. 构建和解释数据可视化图形，包括枝干图、柱状图和框图
    4. 解释随机抽样的原理
    5. 构建和解释正态概率图
    6. 解释如何使用框图和其它数据图形可视化地比较两个或多个样本数据
    7. 知道如何使用简单的时序图可视化地显示面向时间数据的重要特征。
## 6.1、数据的数字化简要描述

对数据良好的数字化简要描述和图形化显示在本质上就是良好的统计思维方式，因为这样可以让工程师集中观察数据的重要特征，也能对数据提供一定的洞见，让工程师更方便地设想到解决问题的模型。利用计算机软件程序，无论是计算还是显示都十分便捷高效。本章的重点就是介绍使用不同的方式方法描述我们要分析和解释的数据。

我们常常使用数字化的方式来描述数据的特征。比如，我们常常用常见的算术平均值来刻画数据的中心位置。如果我们总是认为数据来自于样本，因此我们所指的算术平均值就是**样本平均值**。

!!!note "样本平均值"
    如果样本的$n$个观察值为$x_1,x_2,\cdots,x_n$，那么**样本平均值**就是：

    $$
    \begin{equation}
    \overline{x}=\frac{x_1+x_2+\cdots+x_n}{n}=\frac{\sum\limits_{i=1}^{n}x_i}{n}\qquad
    \end{equation}
    $$

!!!note "实例6.1"
    让我们考虑前面所提到的在混凝土配合比的水胶比等于0.42时，得到一组混凝土立方抗压强度样本值：43.8、43.2、45.0、48.4、45.0、41.2、46.1和46.1(MPa)。则利用公式(1)计算的样本平均值为44.8。

    如图6.1所示，样本平均值可以在物理上解释为混凝土立方抗压强度点图数据的中心位置的测量。当然，样本平均值$\overline{x}=44.8$还可以认为是“平衡点”。

!!!note "图6.1、样本平均值作为加权系统的平衡点"
    ![fig6.1](images/fig6.1.png)

在这里有必要解释样本值的概念。我们说样本，指的是从一个大的**总体**中抽出某些产品，这些被抽出的产品就是样本。一个样本它可能是半导体生成的晶圆，也可能是混凝土生产中的一组立方抗压试件。在设计混凝土配合比时，我们也会制作试件，此时要研究的混凝土总体还不存在，我们称这种总体为**概念总体**或**假设总体**。在混凝土生产过程中，我们也会抽取一定数量的样本制作试件，这时总体是物理存在的总体，可以称之为真实总体。

在前面几章我们讨论概率分布的平均值，我们用$\mu$表示。如果认为概率分布是总体的模型，那么也可以认为平均值就是对总体的所有的测量的平均值。对于只有$N$个样本的有限总体，如果所有样本的抽取概率都是相同的，即样本具有独立同分布的等似然性，则它的概率密度质量函数就是$f(x_i)=1/N$，并且它的平均值为：

$$
\begin{equation}
\mu=\sum\limits_{i=1}^{N}x_if(x_i)=\frac{\sum\limits_{i=1}^{N}x_i}{N}\qquad
\end{equation}
$$

所以样本平均值是总体平均值$\mu$的合理估计。因此，实例6.1中，工程师在设计混凝土配合比时，在0.42的水胶比时，可以得到的混凝土立方抗压强度值为44.8

样本平均值能反映数据的集中程度，但这些信息还不足以让我们洞察数据的特征。我们还需要数据分散程度的测量。这个测量就是**样本方差**或**样本标准差**。

!!!note "样本标准差"
    如果$x_1,x_2,\cdots,x_n$是$n$个观察值，则**样本方差**为：

    $$
    \begin{equation}
    s^2=\frac{\sum\limits_{i=1}^{n}(x_i-\overline{x})^2}{n-1}\qquad
    \end{equation}
    $$

    **样本标准差**为$s$，是样本方差的正平方根。

我们说方差是衡量数据分散程度的测量。假定所有样本的数据是一样的，那么它们都等于其平均值。如果有一个样本数据不在平均值上，则数据有了变动，也即数据有了分散性。这个分散性有多大呢，很自然地，我们会用$x_i-\mu$来衡量它的变动性。如果所有数据都不在平均值上，这种分散性是需要相加的。但是$x_i-\mu$有正有负，如果直接相加会抵消一定数量的变动值，这样的和并不能真正反映出数据变动的剧烈程度。我们需要用一个正值来衡量数据的变动程度，所以很直接地就想到了用$(x_i-\mu)^2$。因此平均变动程度就是样本方差。所以我们说样本方差能反映数据的变动或分散程度。样本方差$s^2$越大，则表明数据分散程度越大；$s^2$越小，反映数据的变动越小。

样本方差的计算公式(3)可以变换为：

$$
\begin{equation}
s^2=\frac{\sum\limits_{i=1}^{n}x_i^2-\frac{\left(\sum\limits_{i=1}^{n}x_i\right)^2}{n}}{n-1}\qquad
\end{equation}
$$

模仿样本方差$s^2$，我们可以认为总体的变动可以用**总体方差**$\sigma^2$来描述。在前面我们就讨论过，$\sigma^2$的正平方根$\sigma$即为**总体标准差**。当总体有限，并且由$N$个等似然的值组成，则可以定义它的总体方差为：

$$
\begin{equation}
\sigma^2=\frac{\sum\limits_{i=1}^{N}(x_i-\mu)^2}{N}\qquad
\end{equation}
$$

我们已经知道，样本平均值可以用来估计总体的平均，类似地，样本方差也可以用来估计总体的方差。这就是我们要在[第七章](senven.md)讨论的**参数点估计**。

这里特别要指出的是，样本方差的计算时，在分母上要使用样本数量减1$n-1$而不是$n$，但计算总体方差时，则要用所有总体值的数量$N$。假设我们知道了总体的平均值$\mu$，则我们知道*样本*的方差就是所有样本观察值相对于$\mu$之差平方的平均值。但是在工程实践中，这个$\mu$往往是永远也不知道的，因此要用$\overline{x}$代替它。但是，$x_i$更接近于$\overline{x}$而不是$\mu$。所以，为了补偿这个差异，我们不得不在分母上使用$n-1$而不是$n$。如果我们在分母上使用$n$，那么平均来说，样本方差就会比总体方差小。这是一种解释。

另外一种解释就是，样本方差要使用$n-1$的**自由度**。自由度的概念来自于：所有的差值$x_1-\overline{x},x_2-\overline{x},\cdots,x_n-\overline{x}$的和总会为零，因此可以用这些差值的$n-1$个确定另外一个。因此，$n$个$x_i-\overline{x}$的值只有$n-1$个是可以自由确定的。

图6.2显示了总体平均值和方差与样本平均值和方差之间的关系。

!!!note "图6.2、总体与样本之间的关系"
    ![fig6.2](images/fig6.2.png)

样本方差与总体方差一样可以描述数据的分散程度。另外一种描述测量就是**样本范围**，也即是样本值的最大最小值之差。这个范围也是一种非常有用的数据分散描述。

!!!note "样本范围"
    设有$n$个样本观察值为$x_1,x_2,\cdots,x_n$，则**样本范围**为：

    $$
    \begin{equation}
    r=\text{max}(x_i)-\text{min}(x_i)\qquad
    \end{equation}
    $$

样本范围更容易计算，但它会忽略所有的处于最大和最小值之间样本值的信息。这是它的缺陷。当然，当$n<8$或$n<10$时，这种忽略还不太严重。比如在广泛使用的统计质量控制中，样本数量一般会只有4个或5个，这种忽略不会引起严重的问题。有关质量控制的内容，会在[第15章](fifth.md)中讨论。


利用公式(4)可以直接计算样本方差，计算更简单。
!!!note "重要概念"
    
    1.
